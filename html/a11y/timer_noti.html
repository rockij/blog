<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta http-equiv="Content-Language" content="ko-KR" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
/>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet" />
<title></title>
<style>
body {
  font-family: 'Poppins', sans-serif;
}
#time {
  padding-left: 20px;
  font-weight: bold;
  font-size: 40px;
}
</style>
</head>

<body>

<div id="time" role="timer" aria-atomic="true">0:00</div>
<ul>
  <li>aria-atomic : 래퍼의 모든 콘텐츠를 발표하도록 하는 추가 속성 해당 속성은 true</li>
  <li>
    aria-live
    <ol>
      <li>assertive : 스크린 리더가 변경 사항을 즉시 알림</li>
      <li>polite : 스크린 리더는 사용자가 상호 작용을 마칠 때까지 콘텐츠의 변경 사항을 알리기 위해 기다림</li>
    </ol>
  </li>
</ul>

<script>
var secondsRemaining;
var intervalHandle;
var intervalArea;

function tick(){
	// grab the h1
	var timeDisplay = document.getElementById("time");

	// turn the seconds into mm:ss
	var min = Math.floor(secondsRemaining / 60);
	var sec = secondsRemaining - (min * 60);

	//add a leading zero (as a string value) if seconds less than 10
	if (sec < 10) {
		sec = "0" + sec;
	}

	// concatenate with colon
	var message = min.toString() + ":" + sec;

	// now change the display
	timeDisplay.innerHTML = message;

	// stop is down to zero
	if (secondsRemaining === 0){
		alert("Done!");
		clearInterval(intervalHandle);
		resetPage();
	}
  if (secondsRemaining%10 === 0){
    console.log("5Done!");
    timeDisplay.setAttribute('aria-live', 'assertive');
    timeDisplay.setAttribute('role', 'alert');
    setTimeout(function() {
      timeDisplay.removeAttribute('aria-live');
      timeDisplay.setAttribute('role', 'timer');
    }, 999);
  }
  console.log(secondsRemaining);

	//subtract from seconds remaining
	secondsRemaining--;

}

function aria() {
  if (secondsRemaining === 0){
		alert("AriaDone!");
		clearInterval(intervalArea);
	}

	secondsRemaining--;
}

function startCountdown(){

	// get countents of the "minutes" text box
	var minutes = 1;
	
	// check if not a number
	if (isNaN(minutes)){
		alert("Please enter a number");
		return; // stops function if true
	}

	// how many seconds
	secondsRemaining = minutes * 60;
	
	//every second, call the "tick" function
	// have to make it into a variable so that you can stop the interval later!!!
	intervalHandle = setInterval(tick, 1000);
	// intervalAria = setInterval(aria, 5000);

}

window.onload = function(){

  startCountdown();

}

</script>

</body>
</html>
